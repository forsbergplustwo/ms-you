<%= polaris_page(
  narrow_width: true,
  title: @symptom.title,
  subtitle: @symptom.current_description,
  back_url: symptoms_path,
  secondary_actions: [
    { content: it("Edit"), url: edit_symptom_path(@symptom) },
  ]
) do |page| %>

  <% page.title_metadata do %>
    <%= render "symptoms/severity_badge", severity: @symptom.current_severity %>
  <% end %>

  <% page.primary_action(data: {
        controller: "polaris",
        target: "#symptom-#{@symptom.id}-new-measurement-modal",
        action: "polaris#openModal",
      }) { it("Log symptom change") } %>

  <%= polaris_card do %>
    <%= render "symptoms/charts/show" %>
  <% end %>

  <%= polaris_card(title: it("Logged symptom changes")) do %>
    <%= render "measurements/table", measurements: @measurements %>
  <% end %>

  <%= polaris_page_actions do |actions| %>
    <% actions.secondary_action(
      destructive: true,
      outline: true,
      data: {
        controller: "polaris",
        target: "#destroy-symptom-modal",
        action: "polaris#openModal",
      }
    ) { it("Delete symptom") } %>
  <% end %>

<% end %>

<%= render "symptoms/modals/new_measurement", symptom: @symptom %>

<%= render "modals/destroy", id: "destroy-symptom-modal", url: symptom_path(@symptom) %>
